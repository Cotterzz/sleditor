<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>SL Editor - UI System Prototype</title>
    
    <!-- Google Fonts for themes (including CJK support) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Latin fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=IBM+Plex+Sans:wght@400;500;600&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&family=Share+Tech+Mono&family=VT323&display=swap" rel="stylesheet">
    <!-- Japanese fonts (Noto Sans JP for UI/content, Noto Sans Mono for code) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600&family=Noto+Sans+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- UI Stylesheet -->
    <link rel="stylesheet" href="ui.css">
    
    <style>
        /* Demo-specific styles */
        .demo-content {
            padding: 16px;
        }
        
        .demo-content h3 {
            margin-bottom: 12px;
            color: var(--text-primary);
        }
        
        .demo-content p {
            color: var(--text-secondary);
            margin-bottom: 12px;
            line-height: 1.6;
        }
        
        .demo-code {
            font-family: var(--font-code);
            background: var(--bg-primary);
            padding: 12px;
            border-radius: calc(var(--border-radius) * 0.5);
            border: 1px solid var(--border);
            color: var(--accent);
            font-size: 0.8rem;
            overflow-x: auto;
            white-space: pre;
        }
        
        .demo-preview {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--bg-tertiary) 100%);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-inverse);
            font-weight: 600;
        }
        
        .demo-section {
            margin-bottom: 24px;
        }
        
        .demo-section-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }
        
        .demo-row {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            margin-bottom: 16px;
        }
        
        .demo-box {
            flex: 1;
            min-width: 200px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            border: 1px solid var(--border);
        }
        
        .demo-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <!-- App will be built by JavaScript -->
    <noscript>
        <div style="padding: 2rem; text-align: center; color: #fff; background: #1a1a2e;">
            <h1>JavaScript Required</h1>
            <p>Please enable JavaScript to use SL Editor.</p>
        </div>
    </noscript>
    
    <!-- UI Module -->
    <script src="ui.js"></script>
    
    <!-- Demo Application -->
    <script>
        // Keep title static
        document.title = `SL Editor - UI System Prototype`;
        
        // Initialize UI system
        SLUI.init().then(() => {
            
            // ========================================
            // COMPONENTS SHOWCASE PANEL
            // ========================================
            
            SLUI.registerPanel({
                id: 'components',
                icon: 'üß©',
                title: 'Components',
                createContent: () => {
                    const div = document.createElement('div');
                    div.className = 'demo-content';
                    
                    // SLIDERS SECTION
                    const slidersSection = document.createElement('div');
                    slidersSection.className = 'demo-section';
                    slidersSection.innerHTML = '<div class="demo-section-title">Sliders</div>';
                    
                    // Basic Slider
                    const sliderBox1 = document.createElement('div');
                    sliderBox1.className = 'demo-box';
                    sliderBox1.innerHTML = '<div class="demo-label">Basic Slider</div>';
                    const basicSlider = SLUI.Slider({ 
                        min: 0, max: 100, value: 50,
                        onInput: (v) => console.log('Slider value:', v)
                    });
                    sliderBox1.appendChild(basicSlider);
                    
                    // Labeled Slider
                    const sliderBox2 = document.createElement('div');
                    sliderBox2.className = 'demo-box';
                    sliderBox2.innerHTML = '<div class="demo-label">Labeled Slider (with min/max)</div>';
                    const labeledSlider = SLUI.LabeledSlider({ 
                        min: 0, max: 1, value: 0.5, step: 0.01,
                        valueFormat: v => v.toFixed(2)
                    });
                    sliderBox2.appendChild(labeledSlider);
                    
                    // Slider Group
                    const sliderBox3 = document.createElement('div');
                    sliderBox3.className = 'demo-box';
                    sliderBox3.innerHTML = '<div class="demo-label">Slider Group (with input)</div>';
                    const sliderGroup = SLUI.SliderGroup({ 
                        label: 'Opacity', 
                        min: 0, max: 100, value: 75,
                        onChange: (v) => console.log('Opacity:', v)
                    });
                    sliderBox3.appendChild(sliderGroup);
                    
                    // Decimal Slider Group
                    const sliderBox4 = document.createElement('div');
                    sliderBox4.className = 'demo-box';
                    sliderBox4.innerHTML = '<div class="demo-label">Decimal Slider Group</div>';
                    const decimalSlider = SLUI.SliderGroup({ 
                        label: 'Scale', 
                        min: 0.1, max: 2.0, value: 1.0, step: 0.1,
                        valueFormat: v => v.toFixed(1)
                    });
                    sliderBox4.appendChild(decimalSlider);
                    
                    const sliderRow = document.createElement('div');
                    sliderRow.className = 'demo-row';
                    sliderRow.appendChild(sliderBox1);
                    sliderRow.appendChild(sliderBox2);
                    slidersSection.appendChild(sliderRow);
                    
                    const sliderRow2 = document.createElement('div');
                    sliderRow2.className = 'demo-row';
                    sliderRow2.appendChild(sliderBox3);
                    sliderRow2.appendChild(sliderBox4);
                    slidersSection.appendChild(sliderRow2);
                    
                    div.appendChild(slidersSection);
                    
                    // TABS SECTION
                    const tabsSection = document.createElement('div');
                    tabsSection.className = 'demo-section';
                    tabsSection.innerHTML = '<div class="demo-section-title">Tabs</div>';
                    
                    // Default Tabs
                    const tabsBox1 = document.createElement('div');
                    tabsBox1.className = 'demo-box';
                    tabsBox1.innerHTML = '<div class="demo-label">Default Tabs</div>';
                    const defaultTabs = SLUI.Tabs({
                        tabs: [
                            { id: 'main', label: 'Main', icon: 'üìÑ', content: '<p style="color: var(--text-secondary);">Main shader code goes here.</p>' },
                            { id: 'bufferA', label: 'Buffer A', icon: 'üÖ∞Ô∏è', content: '<p style="color: var(--text-secondary);">Buffer A code for multi-pass rendering.</p>' },
                            { id: 'bufferB', label: 'Buffer B', icon: 'üÖ±Ô∏è', content: '<p style="color: var(--text-secondary);">Buffer B for additional passes.</p>' }
                        ],
                        onTabChange: (id) => console.log('Tab changed:', id)
                    });
                    tabsBox1.appendChild(defaultTabs);
                    
                    // Pills Tabs
                    const tabsBox2 = document.createElement('div');
                    tabsBox2.className = 'demo-box';
                    tabsBox2.innerHTML = '<div class="demo-label">Pills Variant</div>';
                    const pillsTabs = SLUI.Tabs({
                        tabs: [
                            { id: 'glsl', label: 'GLSL', content: '<p style="color: var(--text-secondary);">OpenGL Shading Language</p>' },
                            { id: 'wgsl', label: 'WGSL', content: '<p style="color: var(--text-secondary);">WebGPU Shading Language</p>' },
                            { id: 'hlsl', label: 'HLSL', content: '<p style="color: var(--text-secondary);">DirectX Shading Language</p>' }
                        ],
                        variant: 'pills'
                    });
                    tabsBox2.appendChild(pillsTabs);
                    
                    // Underline Tabs
                    const tabsBox3 = document.createElement('div');
                    tabsBox3.className = 'demo-box';
                    tabsBox3.innerHTML = '<div class="demo-label">Underline Variant</div>';
                    const underlineTabs = SLUI.Tabs({
                        tabs: [
                            { id: 'code', label: 'Code', content: '<p style="color: var(--text-secondary);">Shader source code editor.</p>' },
                            { id: 'uniforms', label: 'Uniforms', content: '<p style="color: var(--text-secondary);">Uniform variables and controls.</p>' },
                            { id: 'channels', label: 'Channels', content: '<p style="color: var(--text-secondary);">Input channels: textures, audio, video.</p>' }
                        ],
                        variant: 'underline'
                    });
                    tabsBox3.appendChild(underlineTabs);
                    
                    // Closable Tabs
                    const tabsBox4 = document.createElement('div');
                    tabsBox4.className = 'demo-box';
                    tabsBox4.innerHTML = '<div class="demo-label">Closable + Addable</div>';
                    let tabCounter = 3;
                    const closableTabs = SLUI.Tabs({
                        tabs: [
                            { id: 'tab1', label: 'Tab 1', content: '<p style="color: var(--text-secondary);">First tab content</p>' },
                            { id: 'tab2', label: 'Tab 2', content: '<p style="color: var(--text-secondary);">Second tab content</p>' }
                        ],
                        closable: true,
                        addable: true,
                        onTabAdd: () => ({ 
                            id: 'tab' + (++tabCounter), 
                            label: 'Tab ' + tabCounter, 
                            content: '<p style="color: var(--text-secondary);">New tab content</p>' 
                        }),
                        onTabClose: (id) => console.log('Closing tab:', id)
                    });
                    tabsBox4.appendChild(closableTabs);
                    
                    const tabsRow = document.createElement('div');
                    tabsRow.className = 'demo-row';
                    tabsRow.appendChild(tabsBox1);
                    tabsRow.appendChild(tabsBox2);
                    tabsSection.appendChild(tabsRow);
                    
                    const tabsRow2 = document.createElement('div');
                    tabsRow2.className = 'demo-row';
                    tabsRow2.appendChild(tabsBox3);
                    tabsRow2.appendChild(tabsBox4);
                    tabsSection.appendChild(tabsRow2);
                    
                    div.appendChild(tabsSection);
                    
                    return div;
                }
            });
            
            // ========================================
            // ORIGINAL DEMO PANELS
            // ========================================
            
            // Uniforms panel - showcases SliderStack
            SLUI.registerPanel({
                id: 'uniforms',
                icon: 'üéöÔ∏è',
                title: 'Uniforms',
                createContent: () => {
                    const div = document.createElement('div');
                    div.style.padding = '8px';
                    
                    const title = document.createElement('div');
                    title.style.cssText = 'font-size: 0.75rem; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase;';
                    title.textContent = 'Custom Uniforms';
                    div.appendChild(title);
                    
                    const stack = SLUI.SliderStack({
                        sliders: [
                            { name: 'u_speed', min: 0.1, max: 5.0, value: 1.0, step: 0.1 },
                            { name: 'u_scale', min: 0.1, max: 10.0, value: 1.0, step: 0.1 },
                            { name: 'u_intensity', min: 0, max: 1, value: 0.7, step: 0.01 },
                            { name: 'u_offset_x', min: -2, max: 2, value: 0, step: 0.01 },
                            { name: 'u_offset_y', min: -2, max: 2, value: 0, step: 0.01 },
                            { name: 'u_iterations', min: 1, max: 50, value: 16, step: 1, isInt: true }
                        ],
                        onChange: (value, name, index) => {
                            console.log(`Uniform changed: ${name} = ${value}`);
                        }
                    });
                    div.appendChild(stack);
                    
                    return div;
                }
            });
            
            // Controls panel - showcases Parameter, Icon, Timeline sliders
            SLUI.registerPanel({
                id: 'controls',
                icon: 'üéõÔ∏è',
                title: 'Controls',
                createContent: () => {
                    const div = document.createElement('div');
                    div.style.padding = '12px';
                    div.style.display = 'flex';
                    div.style.flexDirection = 'column';
                    div.style.gap = '16px';
                    
                    // Parameter Sliders section
                    const paramSection = document.createElement('div');
                    paramSection.innerHTML = '<div style="font-size: 0.7rem; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase;">Parameter Sliders</div>';
                    
                    const paramContainer = document.createElement('div');
                    paramContainer.style.display = 'flex';
                    paramContainer.style.flexDirection = 'column';
                    paramContainer.style.gap = '6px';
                    
                    // Various parameter sliders
                    paramContainer.appendChild(SLUI.ParameterSlider({
                        title: 'Brightness',
                        min: 0, max: 2, value: 1, step: 0.1,
                        onChange: (v) => console.log('Brightness:', v)
                    }));
                    
                    paramContainer.appendChild(SLUI.ParameterSlider({
                        title: 'Contrast',
                        min: 0, max: 2, value: 1, step: 0.1,
                        onChange: (v) => console.log('Contrast:', v)
                    }));
                    
                    paramContainer.appendChild(SLUI.ParameterSlider({
                        title: 'Iterations',
                        min: 1, max: 100, value: 32, step: 1, isInt: true,
                        showIncrementer: false,
                        onChange: (v) => console.log('Iterations:', v)
                    }));
                    
                    paramContainer.appendChild(SLUI.ParameterSlider({
                        title: 'Blur Radius',
                        min: 0, max: 50, value: 5, step: 1, isInt: true,
                        onChange: (v) => console.log('Blur Radius:', v)
                    }));
                    
                    paramSection.appendChild(paramContainer);
                    div.appendChild(paramSection);
                    
                    // Icon Sliders section
                    const iconSection = document.createElement('div');
                    iconSection.innerHTML = '<div style="font-size: 0.7rem; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase;">Icon Sliders</div>';
                    
                    const iconContainer = document.createElement('div');
                    iconContainer.style.display = 'flex';
                    iconContainer.style.flexDirection = 'column';
                    iconContainer.style.gap = '8px';
                    
                    iconContainer.appendChild(SLUI.IconSlider({
                        icon: 'üîä',
                        min: 0, max: 1, value: 0.7, step: 0.01,
                        onChange: (v) => console.log('Volume:', v)
                    }));
                    
                    iconContainer.appendChild(SLUI.IconSlider({
                        icon: 'üîÜ',
                        min: 0, max: 100, value: 80, step: 1, isInt: true,
                        onChange: (v) => console.log('Brightness:', v)
                    }));
                    
                    iconContainer.appendChild(SLUI.IconSlider({
                        icon: 'üìê',
                        min: 1, max: 4, value: 1, step: 1, isInt: true,
                        compact: true,
                        onChange: (v) => console.log('Pixel Size:', v)
                    }));
                    
                    iconSection.appendChild(iconContainer);
                    div.appendChild(iconSection);
                    
                    // Timeline Slider section
                    const timelineSection = document.createElement('div');
                    timelineSection.innerHTML = '<div style="font-size: 0.7rem; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase;">Timeline Slider</div>';
                    
                    const timeline = SLUI.TimelineSlider({
                        duration: 180,  // 3 minutes
                        value: 45,
                        onChange: (t) => console.log('Time:', t),
                        onSeekStart: () => console.log('Seek started'),
                        onSeekEnd: () => console.log('Seek ended')
                    });
                    
                    timelineSection.appendChild(timeline);
                    div.appendChild(timelineSection);
                    
                    return div;
                }
            });
            
            // Editor panel
            SLUI.registerPanel({
                id: 'editor',
                icon: 'üìù',
                title: 'Editor',
                createContent: () => {
                    const div = document.createElement('div');
                    div.className = 'demo-content';
                    div.innerHTML = `
                        <h3 class="sl-text-ui">${SLUI.t('panels.editor.codeTitle')}</h3>
                        <div class="demo-code">void mainImage(out vec4 fragColor, in vec2 fragCoord) {
    vec2 uv = fragCoord / iResolution.xy;
    vec3 col = 0.5 + 0.5 * cos(iTime + uv.xyx + vec3(0, 2, 4));
    fragColor = vec4(col, 1.0);
}</div>
                        <p style="margin-top: 12px;" class="sl-text-content">
                            ${SLUI.t('panels.editor.codeHint')}
                        </p>
                    `;
                    return div;
                }
            });
            
            // Preview panel
            SLUI.registerPanel({
                id: 'preview',
                icon: 'üé¨',
                title: 'Preview',
                createContent: () => {
                    const div = document.createElement('div');
                    div.className = 'demo-content';
                    div.innerHTML = `
                        <h3 class="sl-text-ui">${SLUI.t('panels.preview.liveTitle')}</h3>
                        <div class="demo-preview">
                            ${SLUI.t('panels.preview.canvasPlaceholder')}
                        </div>
                        <p style="margin-top: 12px;" class="sl-text-content">
                            ${SLUI.t('panels.preview.hint')}
                        </p>
                    `;
                    return div;
                }
            });
            
            // Inspector panel with Sliders
            SLUI.registerPanel({
                id: 'inspector',
                icon: 'üîç',
                title: 'Inspector',
                createContent: () => {
                    const div = document.createElement('div');
                    div.className = 'demo-content';
                    
                    const title = document.createElement('h3');
                    title.className = 'sl-text-ui';
                    title.textContent = SLUI.t('panels.inspector.propertiesTitle');
                    div.appendChild(title);
                    
                    // Add slider controls
                    const radiusSlider = SLUI.SliderGroup({
                        label: SLUI.t('panels.inspector.radius'),
                        min: 0, max: 100, value: 50
                    });
                    div.appendChild(radiusSlider);
                    
                    const smoothSlider = SLUI.SliderGroup({
                        label: SLUI.t('panels.inspector.smoothness'),
                        min: 0, max: 100, value: 30
                    });
                    div.appendChild(smoothSlider);
                    
                    // Color picker
                    const colorGroup = document.createElement('div');
                    colorGroup.className = 'sl-slider-group';
                    colorGroup.innerHTML = `
                        <label class="sl-slider-group-label">${SLUI.t('panels.inspector.color')}</label>
                        <input type="color" value="#e94560" style="width: 100%; height: 32px; border: none; cursor: pointer; border-radius: var(--border-radius);">
                    `;
                    div.appendChild(colorGroup);
                    
                    return div;
                }
            });
            
            // Library panel
            SLUI.registerPanel({
                id: 'library',
                icon: 'üìö',
                title: 'Library',
                createContent: () => {
                    const div = document.createElement('div');
                    div.className = 'demo-content';
                    const items = ['raymarching', 'fractalNoise', 'pbrLighting', 'postProcessing', 'volumetricFog'];
                    div.innerHTML = `
                        <h3 class="sl-text-ui">${SLUI.t('panels.library.title')}</h3>
                        <input type="text" class="sl-input" placeholder="${SLUI.t('panels.library.searchPlaceholder')}" style="width: 100%; margin-bottom: 12px;">
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            ${items.map(key => `
                                <div style="padding: 8px 12px; background: var(--bg-secondary); border-radius: var(--border-radius); cursor: pointer; transition: background var(--transition);" onmouseover="this.style.background='var(--bg-hover)'" onmouseout="this.style.background='var(--bg-secondary)'">
                                    <div style="font-weight: 500;">${SLUI.t('panels.library.items.' + key)}</div>
                                    <div style="font-size: 0.75rem; color: var(--text-muted);">${SLUI.t('panels.library.templateLabel')}</div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    return div;
                }
            });
            
            // Console panel
            SLUI.registerPanel({
                id: 'console',
                icon: 'üí¨',
                title: 'Console',
                createContent: () => {
                    const div = document.createElement('div');
                    div.className = 'demo-content';
                    div.innerHTML = `
                        <h3 class="sl-text-ui">${SLUI.t('panels.console.outputTitle')}</h3>
                        <div style="font-family: var(--font-code); font-size: 0.8rem; background: var(--bg-primary); padding: 12px; border-radius: var(--border-radius); border: 1px solid var(--border); height: 200px; overflow: auto;">
                            <div style="color: var(--success);">[INFO] ${SLUI.t('panels.console.messages.compiled')}</div>
                            <div style="color: var(--text-muted);">[DEBUG] ${SLUI.t('panels.console.messages.frameTime')}</div>
                            <div style="color: var(--warning);">[WARN] ${SLUI.t('panels.console.messages.unusedUniform')}</div>
                            <div style="color: var(--text-muted);">[DEBUG] ${SLUI.t('panels.console.messages.resolution')}</div>
                            <div style="color: var(--success);">[INFO] ${SLUI.t('panels.console.messages.previewUpdated')}</div>
                        </div>
                    `;
                    return div;
                }
            });
            
            // Profile panel (hidden from toolbar)
            SLUI.registerPanel({
                id: 'profile',
                icon: 'üë§',
                title: 'Profile',
                createContent: SLUI.createProfileContent,
                showInToolbar: false
            });
            
            // Settings panel
            SLUI.registerPanel({
                id: 'settings',
                icon: '‚öô',
                title: 'Settings',
                createContent: SLUI.createSettingsContent
            });
            
            // Open components panel by default on desktop
            if (SLUI.state.deviceMode !== 'mobile') {
                setTimeout(() => {
                    document.querySelector('[data-panel-id="uniforms"]')?.click();
                }, 300);
            }
            
            console.log('Device mode:', SLUI.state.deviceMode);
            console.log('Is mobile device:', SLUI.isMobileDevice());
            
        });
    </script>
</body>
</html>
